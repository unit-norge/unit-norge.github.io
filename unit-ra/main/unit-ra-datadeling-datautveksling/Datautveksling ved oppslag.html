<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Datautveksling ved oppslag :: HKdir referansearkitekturer</title>
    <link rel="canonical" href="https://unit-norge.github.io/unit-ra/main/unit-ra-datadeling-datautveksling/Datautveksling%20ved%20oppslag.html">
    <meta name="generator" content="Antora 2.2.0">
    <link rel="stylesheet" href="../../../_/css/site.css">
    <script>var uiRootPath = '../../../_'</script>
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="https://unit-norge.github.io">HKdir referansearkitekturer</a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <a class="navbar-item" href="#">Home</a>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Products</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="#">Product A</a>
            <a class="navbar-item" href="#">Product B</a>
            <a class="navbar-item" href="#">Product C</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Services</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="#">Service A</a>
            <a class="navbar-item" href="#">Service B</a>
            <a class="navbar-item" href="#">Service C</a>
          </div>
        </div>
        <div class="navbar-item">
          <span class="control">
            <a class="button is-primary" href="#">Download</a>
          </span>
        </div>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="unit-ra" data-version="main">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="../index.html">HKdir referansearkitekturer</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../index.html">Om HKdir referansearkitekturer</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../unit-ra-datadeling-sammendrag/Sammendrag.html">Sammendrag av referansearkitekturen</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../Bøker/Referansearkitektur%20for%20deling%20av%20data%20i%20høyere%20utdanning%20og%20forsking.html">Referansearkitektur for deling av data i høyere utdanning og forsking</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../unit-ra-datadeling-introduksjon/Introduksjon.html">Introduksjon</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../unit-ra-datadeling-tilnærming/Tilnærming%20til%20utvikling%20av%20referansearkitekturen.html">Tilnærming til utvikling av referansearkitekturen</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../unit-ra-datadeling-målarkitekturen/Datadelingsplattformen%20og%20felles%20komponentene%20i%20den.html">Datadelingsplattformen og felles komponentene i den</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="Datautveksling.html">Datautveksling</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../unit-ra-datadeling-rutiner/Rutiner.html">Rutiner</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../unit-ra-datadeling-roller/Roller%20og%20ansvar%20for%20informasjonsforvaltning.html">Roller og ansvar for informasjonsforvaltning</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../unit-ra-datadeling-vedlegg-a/Vedlegg%20A;%20Definisjoner.html">Vedlegg A: Definisjoner</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../unit-ra-datadeling-vedlegg-b/Vedlegg%20B;%20Behov%20for%20avklaringer%20og%20utfordringer%20i%20sektorens%20kontekst.html">Vedlegg B: Behov for avklaringer og utfordringer i sektorens kontekst</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../unit-ra-datadeling-vedlegg-c/Vedlegg%20C;%20Integrasjonsprinsipper.html">Vedlegg C: Integrasjonsprinsipper</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../unit-ra-datadeling-vedlegg-d/Vedlegg%20D;%20Behov%20og%20bruksområder.html">Vedlegg D: Behov og bruksområder</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../unit-ra-datadeling-vedlegg-e/Vedlegg%20E;%20Føringer,%20pågående%20og%20videre%20arbeid.html">Vedlegg E: Føringer, pågående og videre arbeid</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">HKdir referansearkitekturer</span>
    <span class="version">main</span>
  </div>
  <ul class="components">
    <li class="component is-current">
      <a class="title" href="../index.html">HKdir referansearkitekturer</a>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="../index.html">main</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../index.html">HKdir referansearkitekturer</a></li>
    <li><a href="Datautveksling%20ved%20oppslag.html">Datautveksling ved oppslag</a></li>
  </ul>
</nav>
  <div class="edit-this-page"><a href="https://github.com/unit-norge/unit-ra/edit/main/docs/modules/unit-ra-datadeling-datautveksling/pages/Datautveksling%20ved%20oppslag.adoc">Edit this Page</a></div>
  </div>
  <div class="content">
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<h1 class="page">Datautveksling ved oppslag</h1>
<div class="sect1">
<h2 id="_datautvekslingsmønster"><a class="anchor" href="#_datautvekslingsmønster"></a>1. Datautvekslingsmønster</h2>
<div class="sectionbody">
<div class="paragraph">
<p><strong>Synkront oppslag</strong></p>
</div>
<div class="paragraph">
<p><em>Synkront oppslag</em> er realiseringen av eOppslag. I dette mønsteret
hentes data fra datakilden ved behov. Et typisk eksempel på synkront
oppslag kan være uthenting av aktuelle konteringsregler fra
økonomisystemet ved prevalidering av regnskap før det føres i hovedbok.</p>
</div>
<div class="paragraph">
<p><strong>Provisjonering via synkront oppslag</strong></p>
</div>
<div class="paragraph">
<p>Synkront oppslag kan også benyttes til provisjonering. I et slikt
tilfelle hentes all informasjon det er nødvendig at blir lagret i et
system fra datakilden, før det lagres. Ved provisjonering med synkront
oppsalg er det ofte store mengder data i bevegelse, og overføringen tar
tid. Disse egenskapene medfører at provisjonering via synkront oppslag
utføres sjelden. Denne metoden blir ofte kalt <em>batch-provisjonering</em>.</p>
</div>
<div class="paragraph">
<p><strong>Provisjonering via lettvekts eNotifikasjoner</strong></p>
</div>
<div class="paragraph">
<p>I de tilfellene provisjonering via synkrone oppslag ikke kan besørge en
propageringshastighet som understøtter brukerenes behov, kan lette
eNotifikasjoner benyttes i kombinasjon med eOppslag. De lette
eNotifikasjonene bærer informasjon om <em>hvilke</em> data som har endret seg i
datakilden, og leveres umiddelbart til de som måtte være interessert i
dataendringene. Dette tillater systemet som er avhengig av
provisjonering å hente kun den informasjonen som har blitt endret.</p>
</div>
<div class="paragraph">
<p>Et typisk eksempel på bruk av dette mønsteret er visning av
kontaktinformasjon i personprofiler. En professor kjøper seg ny telefon,
og melder nummeret inn til sin arbeidsgiver. Telefonnummeret er
reflektert i personprofilen snarlig etter registrering i HR-systemet.</p>
</div>
<div class="paragraph">
<p><strong>Fremtidige utvidelser</strong></p>
</div>
<div class="paragraph">
<p>Digitaliseringsdirektoratets referansearkitektur definerer to varianter
av eNotifikasjon, den tidligere omtalte lettvektsvarianten, og en basert
på hendelseslister.</p>
</div>
<div class="paragraph">
<p>Hendelseslister består av notifikasjoner som konsumeres via eOppslag.
Notifikasjonene kan inneholde varierende mengde informasjon, og
propageres ikke like hurtig som lettvektsvarianten beskrevet ovenfor.
Hendelseslistene er persistente av natur (til forskjell fra
lettvektsvarianten, der notifikasjonene «forsvinner» når de er
konsumert), og lar sådan datakilden beskrive en historikk. Et typisk
eksempel på en slik historikk kan være de forskjellige stegene i en
saksbehandlingsprosess, der de forskjellige stegene må være klart
definert for å kunne foreta videre steg i saksbehandlingsprosessen,
eller realisere etterlevelse av juridiske krav.</p>
</div>
<div class="paragraph">
<p>I neste versjon av referansearkitekturen vil det vurderes å inkludere
varianten basert på hendelseslister. Det vil også vurderes å utvide
definisjonen av lettvektsnotifikasjoner slik at de kan bære konkrete
data (også kalt <em>Event Carried State Transfer</em>), til forskjell fra
eksisterende definisjon der de kun bærer en referanse til dataene som er
endret.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_eoppslag_verdistrøm_med_kapabiliteter_for_tilbyder_og_konsument_uhf"><a class="anchor" href="#_eoppslag_verdistrøm_med_kapabiliteter_for_tilbyder_og_konsument_uhf"></a>2. eOppslag Verdistrøm med kapabiliteter for tilbyder og konsument - UHF</h2>
<div class="sectionbody">
<div class="imageblock">
<div class="content">
<img src="_images/eOppslag%20Verdistrøm%20med%20kapabiliteter%20for%20tilbyder%20og%20konsument%20-%20UHF%20%20.png" alt="eOppslag Verdistrøm med kapabiliteter for tilbyder og konsument - UHF   image">
</div>
<div class="title">Figure 1. eOppslag Verdistrøm med kapabiliteter for tilbyder og konsument - UHF</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph">
<p><a href="eOppslag%20Verdistrøm%20med%20kapabiliteter%20for%20tilbyder%20og%20konsument%20-%20UHF%20%20.var.1.html" class="page">Vis detaljer om elementene i diagrammet</a> (Tips: <kbd>Shift</kbd>-klikk for å åpne i nytt vindu)</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_publiser_api"><a class="anchor" href="#_publiser_api"></a>3. Publiser API</h2>
<div class="sectionbody">
<div class="paragraph">
<p>En prosessflyt som datatilbyder må gjennomføre for å gjøre et API synlig
og tilgjengelig gjennom kataloger og søkeløsninger. Metadata om APIet
blir registrert i API-katalogen. Metadata inkluderer begreper og
datamodeller omfattet av datasettet som APIet tilgjengeliggjør, samt
tilganger (scopes) knyttet til APIet som kan tildeles konsumenter.</p>
</div>
<div class="paragraph">
<p>APIet registrert i UHF API katalog blir høstet inn i Felles API katalog.
Vi ønsker at tilganger (scopes) i tillegg skal registreres i
Maskinporten slik at konsumenter utenfor UHF sektoren kan oppdage APIet
og be om tilgang på et senere tidspunkt.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/Publiser%20API.png" alt="Publiser API image">
</div>
<div class="title">Figure 2. Publiser API</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph">
<p><a href="Publiser%20API.var.1.html" class="page">Vis detaljer om elementene i diagrammet</a> (Tips: <kbd>Shift</kbd>-klikk for å åpne i nytt vindu)</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_tilgjengeliggjøre_data_etter_forsepørsel_løsningsmønster_uhf"><a class="anchor" href="#_tilgjengeliggjøre_data_etter_forsepørsel_løsningsmønster_uhf"></a>4. Tilgjengeliggjøre data etter forsepørsel løsningsmønster UHF</h2>
<div class="sectionbody">
<div class="paragraph">
<p>En prosessflyt som datatilbyder må gjennomføre for å tildele rettigheter til en konsument som ber om tilgang til data. En datatilbyder mottar forespørsel om tilgang til et API på vegne av en organisasjon eller bruker. Dataeieren tar stilling til om konsumenten skal få tilgang til data gjennom APIet. Tilgang registreres knyttet til konsumentens klient (applikasjonen som benytter APIet) i klientregisteret.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/Tilgjengeliggjøre%20data%20etter%20forsepørsel%20løsningsmønster%20UHF.png" alt="Tilgjengeliggjøre data etter forsepørsel løsningsmønster UHF image">
</div>
<div class="title">Figure 3. Tilgjengeliggjøre data etter forsepørsel løsningsmønster UHF</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph">
<p><a href="Tilgjengeliggjøre%20data%20etter%20forsepørsel%20løsningsmønster%20UHF.var.1.html" class="page">Vis detaljer om elementene i diagrammet</a> (Tips: <kbd>Shift</kbd>-klikk for å åpne i nytt vindu)</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_få_tilgang_til_data_løsningsmønster_uhf"><a class="anchor" href="#_få_tilgang_til_data_løsningsmønster_uhf"></a>5. Få tilgang til data - løsningsmønster UHF</h2>
<div class="sectionbody">
<div class="paragraph">
<p>En prosessflyt en konsument av data må gjennomføre for å få tildelt rettigheter til data gjennom et API. Det omfatter å få kjennskap til aktuelt API gjennom API-katalogen, autentisere konsumenten, inngå avtale om bruk av data, samt å registrere tilganger hos den tekniske komponenten som skal utføre tjenestekallet. Dersom det dreier seg om tilgang til et åpent tilgjengelig API, kan enkelte delaktiviteter i prosessene hoppes over, men for å kunne logge informasjon om bruk av APIer bør alle konsumenter av et API registreres i klientregisteret.</p>
</div>
<div class="paragraph">
<p>Viewet bør strengt tatt vise at konsumenten kan finne APIet enten i UHF sektorens API katalog eller i Felles datakatalog. Vi velger å vise prosessflyten kun med UHF sektorens komponenter både for å kunne presentere en oversiktlig prosessflyt og fordi forholdet til de nasjonale felleskomponenter er ennå ikke helt avklart.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/Få%20tilgang%20til%20data%20-%20løsningsmønster%20UHF.png" alt="Få tilgang til data - løsningsmønster UHF image">
</div>
<div class="title">Figure 4. Få tilgang til data - løsningsmønster UHF</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph">
<p><a href="Få%20tilgang%20til%20data%20-%20løsningsmønster%20UHF.var.1.html" class="page">Vis detaljer om elementene i diagrammet</a> (Tips: <kbd>Shift</kbd>-klikk for å åpne i nytt vindu)</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_innhente_data_løsningsmønster_uhf"><a class="anchor" href="#_innhente_data_løsningsmønster_uhf"></a>6. Innhente data - løsningsmønster UHF</h2>
<div class="sectionbody">
<div class="paragraph">
<p>En prosessflyt en konsument utfører når det utføres et tjenestekall for å innhente data gjennom et API. API-adressen hentes i API-katalogen. Tilgang til APIet byttes inn mot et kjøretids-token i autoriseringstjenesten. Tjenestekall til APIet utføres gjennom API gateway der tokenet benyttes for å få tilgang. Dersom det er et åpent API er det kun relevante prossessteg som utføres.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/Innhente%20data%20-%20løsningsmønster%20UHF.png" alt="Innhente data - løsningsmønster UHF image">
</div>
<div class="title">Figure 5. Innhente data - løsningsmønster UHF</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph">
<p><a href="Innhente%20data%20-%20løsningsmønster%20UHF.var.1.html" class="page">Vis detaljer om elementene i diagrammet</a> (Tips: <kbd>Shift</kbd>-klikk for å åpne i nytt vindu)</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_avgi_data_løsningsmønster_uhf"><a class="anchor" href="#_avgi_data_løsningsmønster_uhf"></a>7. Avgi data - løsningsmønster UHF</h2>
<div class="sectionbody">
<div class="paragraph">
<p>En prosessflyt en tilbyder av data utfører for å svare på en dataforespørsel. Tilbyder mottar forespørsel om oppslag med et aksesstoken. Klienten som forespør autentiseres og token valideres. Eventuelt mer fin-granulert tilgangskontroll utføres og data returneres. Tilgang kontrolleres kun dersom det er snakk om et sikret API.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/Avgi%20data%20-%20løsningsmønster%20UHF.png" alt="Avgi data - løsningsmønster UHF image">
</div>
<div class="title">Figure 6. Avgi data - løsningsmønster UHF</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph">
<p><a href="Avgi%20data%20-%20løsningsmønster%20UHF.var.1.html" class="page">Vis detaljer om elementene i diagrammet</a> (Tips: <kbd>Shift</kbd>-klikk for å åpne i nytt vindu)</p>
</div>
</div>
</div>
</div>
</div>
</article>
  </div>
</main>
</div>
<footer class="footer">
  <p>This page was built using the Antora default UI.</p>
  <p>The source code for this UI is licensed under the terms of the MPL-2.0 license.</p>
</footer>
<script src="../../../_/js/site.js"></script>
<script async src="../../../_/js/vendor/highlight.js"></script>
  </body>
</html>
