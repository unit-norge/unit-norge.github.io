<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Datautveksling :: Referansearkitekturer i høyere utdanning og forskning</title>
    <link rel="canonical" href="https://unit-norge.github.io/unit-ra/main/unit-ra-datadeling-datautveksling/Datautveksling.html">
    <meta name="generator" content="Antora 2.2.0">
    <link rel="stylesheet" href="../../../_/css/site.css">
    <script>var uiRootPath = '../../../_'</script>
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="https://unit-norge.github.io">Referansearkitekturer i høyere utdanning og forskning</a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <a class="navbar-item" href="#">Home</a>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Products</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="#">Product A</a>
            <a class="navbar-item" href="#">Product B</a>
            <a class="navbar-item" href="#">Product C</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Services</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="#">Service A</a>
            <a class="navbar-item" href="#">Service B</a>
            <a class="navbar-item" href="#">Service C</a>
          </div>
        </div>
        <div class="navbar-item">
          <span class="control">
            <a class="button is-primary" href="#">Download</a>
          </span>
        </div>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="unit-ra" data-version="main">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="../index.html">Referansearkitekturer i høyere utdanning og forskning</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../om-hkdir-referansearkitekturer.html">Om våre referansearkitekturer</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../unit-ra-datadeling-sammendrag/Sammendrag.html">Sammendrag</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../Bøker/Referansearkitektur%20for%20deling%20av%20data%20i%20høyere%20utdanning%20og%20forsking.html">Referansearkitektur for deling av data i høyere utdanning og forsking</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../unit-ra-datadeling-introduksjon/Introduksjon.html">Introduksjon</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../unit-ra-datadeling-tilnærming/Tilnærming%20til%20utvikling%20av%20referansearkitekturen.html">Tilnærming til utvikling av referansearkitekturen</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../unit-ra-datadeling-roller/Roller%20og%20ansvar%20for%20informasjonsforvaltning.html">Roller og ansvar for informasjonsforvaltning</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../unit-ra-datadeling-målarkitekturen/Datadelingsplattformen%20og%20fellestjenestene%20i%20den.html">Datadelingsplattformen og fellestjenestene i den</a>
  </li>
  <li class="nav-item is-current-page" data-depth="2">
    <a class="nav-link" href="Datautveksling.html">Datautveksling</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../unit-ra-datadeling-rutiner/Rutiner.html">Rutiner</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../unit-ra-datadeling-vedlegg-a/Vedlegg%20A;%20Definisjoner.html">Vedlegg A: Definisjoner</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../unit-ra-datadeling-vedlegg-b/Vedlegg%20B;%20Behov%20for%20avklaringer%20og%20utfordringer%20i%20sektorenes%20kontekst.html">Vedlegg B: Behov for avklaringer og utfordringer i sektorenes kontekst</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../unit-ra-datadeling-vedlegg-c/Vedlegg%20C;%20Integrasjonsprinsipper.html">Vedlegg C: Integrasjonsprinsipper</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../unit-ra-datadeling-vedlegg-d/Vedlegg%20D;%20Behov%20og%20bruksområder.html">Vedlegg D: Behov og bruksområder</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../unit-ra-datadeling-vedlegg-e/Vedlegg%20E;%20Føringer.html">Vedlegg E: Føringer</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../unit-ra-datadeling-vedlegg-f/Vedlegg%20F;%20Bruk%20av%20Archimate.html">Vedlegg F: Bruk av Archimate</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">Referansearkitekturer i høyere utdanning og forskning</span>
    <span class="version">main</span>
  </div>
  <ul class="components">
    <li class="component is-current">
      <a class="title" href="../index.html">Referansearkitekturer i høyere utdanning og forskning</a>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="../index.html">main</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../index.html">Referansearkitekturer i høyere utdanning og forskning</a></li>
    <li><a href="../Bøker/Referansearkitektur%20for%20deling%20av%20data%20i%20høyere%20utdanning%20og%20forsking.html">Referansearkitektur for deling av data i høyere utdanning og forsking</a></li>
    <li><a href="Datautveksling.html">Datautveksling</a></li>
  </ul>
</nav>
  <div class="edit-this-page"><a href="https://github.com/unit-norge/unit-ra/edit/main/docs/modules/unit-ra-datadeling-datautveksling/pages/Datautveksling.adoc">Edit this Page</a></div>
  </div>
  <div class="content">
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<h1 class="page">Datautveksling</h1>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>Fellestjenestene i datadelingsplattformen brukes i felles prosesser for å dele data. Gjennom å utføre en fellesprosess, vil en datakonsument eller en datatilbyder oppnå en evne (kapabilitet). Dette kapittelet beskriver de fellesprosessene som er definert for deling av data, og de evnene som oppnås ved å benytte dem. Prosessbeskrivelsen viser hvilke tjenester støtter prosessen, og hvilke komponenter realiserer tjenestene. Prosessbeskrivelsen viser også de sentrale forretningsobjekter og dataobjekter som benyttes og produseres underveis. Både tjenester og komponenter kan aksessere dataobjekter.</p>
</div>
<div class="paragraph">
<p>Prosessbeskrivelsene er presentert i <a href="https://www.opengroup.org/archimate-forum/archimate-overview">ArchiMate modelleringsspråk</a>. Vår bruk av Archimate er beskrevet i Vedlegg F. Prosesstegningene er definert for høyere utdanning og forskning, omtalt som "UHF".</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_delegere_rettigheter_til_databehandler_uhf"><a class="anchor" href="#_delegere_rettigheter_til_databehandler_uhf"></a>1. Delegere rettigheter til databehandler - UHF</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Delegering av rettigheter til databehandler er det en konsument må gjøre
for at en leverandør kan identifisere seg med sitt eget
virksomhetssertifikat og opptre på vegne av konsumenten som er den som
innehar behandlingsgrunnlaget for å innhente data.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/Delegere%20rettigheter%20til%20databehandler%20-%20UHF.png" alt="Delegere rettigheter til databehandler - UHF image">
</div>
<div class="title">Figure 1. Delegere rettigheter til databehandler - UHF</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph">
<p><a href="Delegere%20rettigheter%20til%20databehandler%20-%20UHF.var.1.html" class="page">Vis detaljer om elementene i diagrammet</a> (Tips: <kbd>Shift</kbd>-klikk for å åpne i nytt vindu)</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_datautveksling_ved_oppslag"><a class="anchor" href="#_datautveksling_ved_oppslag"></a>2. Datautveksling ved oppslag</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_datautvekslingsmønster"><a class="anchor" href="#_datautvekslingsmønster"></a>2.1. Datautvekslingsmønster</h3>
<div class="paragraph">
<p><strong>Synkront oppslag</strong></p>
</div>
<div class="paragraph">
<p><em>Synkront oppslag</em> er realiseringen av eOppslag. I dette mønsteret
hentes data fra datakilden ved behov. Et typisk eksempel på synkront
oppslag kan være uthenting av aktuelle konteringsregler fra
økonomisystemet ved prevalidering av regnskap før det føres i hovedbok.</p>
</div>
<div class="paragraph">
<p><strong>Provisjonering via synkront oppslag</strong></p>
</div>
<div class="paragraph">
<p>Synkront oppslag kan også benyttes til provisjonering. I et slikt
tilfelle hentes all informasjon det er nødvendig å lagre i et
system fra datakilden. Ved provisjonering med synkront
oppslag er det ofte store mengder data i bevegelse, og overføringen tar
tid. Disse egenskapene medfører at provisjonering via synkront oppslag
utføres sjelden. Denne metoden blir ofte kalt <em>batch-provisjonering</em>.</p>
</div>
<div class="paragraph">
<p><strong>Provisjonering via lettvekts eNotifikasjoner</strong></p>
</div>
<div class="paragraph">
<p>I de tilfellene provisjonering via synkrone oppslag ikke kan besørge en
propageringshastighet som understøtter brukernes behov, kan lette
eNotifikasjoner benyttes i kombinasjon med eOppslag. De lette
eNotifikasjonene bærer informasjon om <em>hvilke</em> data som har endret seg i
datakilden, og leveres umiddelbart til de som måtte være interessert i
dataendringene. Dette tillater systemet som er avhengig av
provisjonering å hente kun den informasjonen som har blitt endret.</p>
</div>
<div class="paragraph">
<p>Et typisk eksempel på bruk av dette mønsteret er en professor som publiserer en artikkel i Nasjonalt Vitenarkiv. Professorens personprofil på institusjonens nettsider blir oppdatert snarlig etter at  artikkelen er publisert i Nasjonalt Vitenarkiv, siden det blir sendt en lettvekts notifikasjon om registreringen.</p>
</div>
<div class="paragraph">
<p><strong>Fremtidige utvidelser</strong></p>
</div>
<div class="paragraph">
<p>Digitaliseringsdirektoratets referansearkitektur definerer to varianter
av eNotifikasjon, den tidligere omtalte lettvektsvarianten, og en basert
på hendelseslister.</p>
</div>
<div class="paragraph">
<p>Hendelseslister består av notifikasjoner som konsumeres via eOppslag.
Notifikasjonene kan inneholde varierende mengde informasjon, og
propageres ikke like hurtig som lettvektsvarianten beskrevet ovenfor.
Hendelseslistene er persistente av natur (til forskjell fra
lettvektsvarianten, der notifikasjonene «forsvinner» når de er
konsumert), og lar sådan datakilden beskrive en historikk. Et typisk
eksempel på en slik historikk kan være de forskjellige stegene i en
saksbehandlingsprosess, der de forskjellige stegene må være klart
definert for å kunne foreta videre steg i saksbehandlingsprosessen,
eller realisere etterlevelse av juridiske krav.</p>
</div>
<div class="paragraph">
<p>I neste versjon av referansearkitekturen vil det vurderes å inkludere
varianten basert på hendelseslister. Det vil også vurderes å utvide
definisjonen av lettvektsnotifikasjoner slik at de kan bære konkrete
data (også kalt <em>Event Carried State Transfer</em>), til forskjell fra
eksisterende definisjon der de kun bærer en referanse til dataene som er
endret.</p>
</div>
</div>
<div class="sect2">
<h3 id="_eoppslag_verdistrøm_med_kapabiliteter_for_tilbyder_og_konsument_uhf"><a class="anchor" href="#_eoppslag_verdistrøm_med_kapabiliteter_for_tilbyder_og_konsument_uhf"></a>2.2. eOppslag Verdistrøm med kapabiliteter for tilbyder og konsument - UHF</h3>
<div class="imageblock">
<div class="content">
<img src="_images/eOppslag%20Verdistrøm%20med%20kapabiliteter%20for%20tilbyder%20og%20konsument%20-%20UHF%20%20.png" alt="eOppslag Verdistrøm med kapabiliteter for tilbyder og konsument - UHF   image">
</div>
<div class="title">Figure 2. eOppslag Verdistrøm med kapabiliteter for tilbyder og konsument - UHF</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph">
<p><a href="eOppslag%20Verdistrøm%20med%20kapabiliteter%20for%20tilbyder%20og%20konsument%20-%20UHF%20%20.var.1.html" class="page">Vis detaljer om elementene i diagrammet</a> (Tips: <kbd>Shift</kbd>-klikk for å åpne i nytt vindu)</p>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_publiser_api"><a class="anchor" href="#_publiser_api"></a>2.3. Publiser API</h3>
<div class="paragraph">
<p>En prosessflyt som datatilbyder må gjennomføre for å gjøre et API synlig
og tilgjengelig gjennom kataloger og søkeløsninger. Metadata om APIet
blir registrert i API-katalogen. Metadata inkluderer begreper og
datamodeller omfattet av datasettet som APIet tilgjengeliggjør, samt
tilganger (scopes) knyttet til APIet som kan tildeles konsumenter.</p>
</div>
<div class="paragraph">
<p>APIet registrert i UHF API katalog blir høstet inn i Felles API katalog.
Vi ønsker at tilganger (scopes) i tillegg skal registreres i
Maskinporten slik at konsumenter utenfor UHF sektoren kan oppdage APIet
og be om tilgang på et senere tidspunkt.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/Publiser%20API.png" alt="Publiser API image">
</div>
<div class="title">Figure 3. Publiser API</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph">
<p><a href="Publiser%20API.var.1.html" class="page">Vis detaljer om elementene i diagrammet</a> (Tips: <kbd>Shift</kbd>-klikk for å åpne i nytt vindu)</p>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_tilgjengeliggjøre_data_etter_forespørsel_løsningsmønster_uhf"><a class="anchor" href="#_tilgjengeliggjøre_data_etter_forespørsel_løsningsmønster_uhf"></a>2.4. Tilgjengeliggjøre data etter forespørsel - løsningsmønster UHF</h3>
<div class="paragraph">
<p>En prosessflyt som datatilbyder må gjennomføre for å tildele rettigheter til en konsument som ber om tilgang til data. En datatilbyder mottar forespørsel om tilgang til et API på vegne av en organisasjon eller bruker. Dataeieren tar stilling til om konsumenten skal få tilgang til data gjennom APIet. Tilgang registreres knyttet til konsumentens klient (applikasjonen som benytter APIet) i klientregisteret.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/Tilgjengeliggjøre%20data%20etter%20forespørsel%20-%20løsningsmønster%20UHF.png" alt="Tilgjengeliggjøre data etter forespørsel - løsningsmønster UHF image">
</div>
<div class="title">Figure 4. Tilgjengeliggjøre data etter forespørsel - løsningsmønster UHF</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph">
<p><a href="Tilgjengeliggjøre%20data%20etter%20forespørsel%20-%20løsningsmønster%20UHF.var.1.html" class="page">Vis detaljer om elementene i diagrammet</a> (Tips: <kbd>Shift</kbd>-klikk for å åpne i nytt vindu)</p>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_få_tilgang_til_data_løsningsmønster_uhf"><a class="anchor" href="#_få_tilgang_til_data_løsningsmønster_uhf"></a>2.5. Få tilgang til data - løsningsmønster UHF</h3>
<div class="paragraph">
<p>En prosessflyt en konsument av data må gjennomføre for å få tildelt rettigheter til data gjennom et API. Det omfatter å få kjennskap til aktuelt API gjennom API-katalogen, autentisere konsumenten, inngå avtale om bruk av data, samt å registrere tilganger hos den tekniske komponenten som skal utføre tjenestekallet. Dersom det dreier seg om tilgang til et åpent tilgjengelig API, kan enkelte delaktiviteter i prosessene hoppes over, men for å kunne logge informasjon om bruk av APIer bør alle konsumenter av et API registreres i klientregisteret.</p>
</div>
<div class="paragraph">
<p>Viewet bør strengt tatt vise at konsumenten kan finne APIet enten i UHF sektorens API katalog eller i Felles datakatalog. Vi velger å vise prosessflyten kun med UHF sektorens komponenter både for å kunne presentere en oversiktlig prosessflyt og fordi forholdet til de nasjonale felleskomponenter ennå ikke er helt avklart.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/Få%20tilgang%20til%20data%20-%20løsningsmønster%20UHF.png" alt="Få tilgang til data - løsningsmønster UHF image">
</div>
<div class="title">Figure 5. Få tilgang til data - løsningsmønster UHF</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph">
<p><a href="Få%20tilgang%20til%20data%20-%20løsningsmønster%20UHF.var.1.html" class="page">Vis detaljer om elementene i diagrammet</a> (Tips: <kbd>Shift</kbd>-klikk for å åpne i nytt vindu)</p>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_innhente_data_løsningsmønster_uhf"><a class="anchor" href="#_innhente_data_løsningsmønster_uhf"></a>2.6. Innhente data - løsningsmønster UHF</h3>
<div class="paragraph">
<p>En prosessflyt en konsument utfører når det utføres et tjenestekall for å innhente data gjennom et API. API-adressen hentes i API-katalogen. Tilgang til APIet byttes inn mot et kjøretids-token i autoriseringstjenesten. Tjenestekall til APIet utføres gjennom API gateway der tokenet benyttes for å få tilgang. Dersom det er et åpent API er det kun relevante prossessteg som utføres.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/Innhente%20data%20-%20løsningsmønster%20UHF.png" alt="Innhente data - løsningsmønster UHF image">
</div>
<div class="title">Figure 6. Innhente data - løsningsmønster UHF</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph">
<p><a href="Innhente%20data%20-%20løsningsmønster%20UHF.var.1.html" class="page">Vis detaljer om elementene i diagrammet</a> (Tips: <kbd>Shift</kbd>-klikk for å åpne i nytt vindu)</p>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_avgi_data_løsningsmønster_uhf"><a class="anchor" href="#_avgi_data_løsningsmønster_uhf"></a>2.7. Avgi data - løsningsmønster UHF</h3>
<div class="paragraph">
<p>En prosessflyt en tilbyder av data utfører for å svare på en dataforespørsel. Tilbyder mottar forespørsel om oppslag med et aksesstoken. Klienten som forespør autentiseres og token valideres. Eventuelt mer fin-granulert tilgangskontroll utføres og data returneres. Tilgang kontrolleres kun dersom det er snakk om et sikret API.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/Avgi%20data%20-%20løsningsmønster%20UHF.png" alt="Avgi data - løsningsmønster UHF image">
</div>
<div class="title">Figure 7. Avgi data - løsningsmønster UHF</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph">
<p><a href="Avgi%20data%20-%20løsningsmønster%20UHF.var.1.html" class="page">Vis detaljer om elementene i diagrammet</a> (Tips: <kbd>Shift</kbd>-klikk for å åpne i nytt vindu)</p>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_datautveksling_ved_publisering_konsumering_hendelsesbasert"><a class="anchor" href="#_datautveksling_ved_publisering_konsumering_hendelsesbasert"></a>3. Datautveksling ved publisering – konsumering (hendelsesbasert)</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Datautveksling ved publisering og konsumering av hendelser er basert på
<a href="https://nasjonal-arkitektur.github.io/architecture-repository/publish-subscribe/book-publish-subscribe.html">publisering-konsumering</a>
i
<a href="https://nasjonal-arkitektur.github.io/architecture-repository/data-exchange-ra/book-data-exchange-ra.html">Referansearkitektur
for datautveksling fra Digitaliseringsdirektoratet</a>.</p>
</div>
<div class="sect2">
<h3 id="_publisering_av_hendelser_basiskonsept_uhf"><a class="anchor" href="#_publisering_av_hendelser_basiskonsept_uhf"></a>3.1. Publisering av hendelser - basiskonsept UHF</h3>
<div class="paragraph">
<p>Hendelser er endringer som oppstår hos en datatilbyder og som
nødvendiggjør at datatilbyder deler denne endringen med andre.</p>
</div>
<div class="paragraph">
<p>Datatilbyder publiserer en hendelse til en hendelsesstrøm. Datakonsument
konsumerer hendelser fra hendelsesstrømmen og om nødvendig gjør
oppdateringer av sine data.</p>
</div>
<div class="paragraph">
<p>Hendelsestrømmer implementeres som lettvekts notifikasjoner i en
notifikasjonskø (publiser/abonner).</p>
</div>
<div class="paragraph">
<p>Alternative måter er blant annet hendelseslister, som beskrevet i
Digitaliseringsdirektoratets referansearkitektur for datadeling og i
kapittelet Datautvekslingsmønster.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/Publisering%20av%20hendelser%20-%20basiskonsept%20UHF.png" alt="Publisering av hendelser - basiskonsept UHF image">
</div>
<div class="title">Figure 8. Publisering av hendelser - basiskonsept UHF</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph">
<p><a href="Publisering%20av%20hendelser%20-%20basiskonsept%20UHF.var.1.html" class="page">Vis detaljer om elementene i diagrammet</a> (Tips: <kbd>Shift</kbd>-klikk for å åpne i nytt vindu)</p>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_enotifikasjon_oversikt_over_verdistrømmer_uhf"><a class="anchor" href="#_enotifikasjon_oversikt_over_verdistrømmer_uhf"></a>3.2. eNotifikasjon - oversikt over verdistrømmer UHF</h3>
<div class="paragraph">
<p>Den overordnede verdistrømmen vist under skisserer handlingene hos
datatilbyder og datakonsument som inngår i dette utvekslingsmønsteret.
Datatilbyderen oppretter en hendelsesstrøm som datakonsumenten oppdager
og abonnerer på. Datatilbyderen publiserer notifikasjoner om hendelser i
hendelsesstrømmen, og datakonsumenten innhenter disse. Når konsumenten
har mottatt en notifikasjon, vurderer konsumenten om det er behov for å
innhente mer informasjon om hendelsen. I så fall benytter konsumenten
synkront oppslag som beskrevet tidligere for innhentingen.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/notifikasjon%20verdistrøm.png" alt="notifikasjon verdistrøm">
</div>
<div class="title">Figure 9. eNotifikasjon verdistrøm</div>
</div>
</div>
<div class="sect2">
<h3 id="_grunnleggende_begreper_for_publisering_av_hendelser_hendelsesliste_publiser_og_abonner_uhf"><a class="anchor" href="#_grunnleggende_begreper_for_publisering_av_hendelser_hendelsesliste_publiser_og_abonner_uhf"></a>3.3. Grunnleggende begreper for publisering av hendelser - Hendelsesliste, Publiser og Abonner UHF</h3>
<div class="paragraph">
<p>Notifikasjoner blir publisert i form av publisering/abonnering til en
notifikasjonskø. Hendelseslister er en alternativ måte å beskrive
en slik strøm av hendelser.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/Grunnleggende%20begreper%20for%20publisering%20av%20hendelser%20-%20Hendelsesliste,%20Publiser%20og%20Abonner%20UHF.png" alt="Grunnleggende begreper for publisering av hendelser - Hendelsesliste" width="Publiser og Abonner UHF image">
</div>
<div class="title">Figure 10. Grunnleggende begreper for publisering av hendelser - Hendelsesliste, Publiser og Abonner UHF</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph">
<p><a href="Grunnleggende%20begreper%20for%20publisering%20av%20hendelser%20-%20Hendelsesliste,%20Publiser%20og%20Abonner%20UHF.var.1.html" class="page">Vis detaljer om elementene i diagrammet</a> (Tips: <kbd>Shift</kbd>-klikk for å åpne i nytt vindu)</p>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_notifikasjonsinnhold_basiskonsept_uhf"><a class="anchor" href="#_notifikasjonsinnhold_basiskonsept_uhf"></a>3.4. Notifikasjonsinnhold - basiskonsept UHF</h3>
<div class="paragraph">
<p>Som et minimum må en notifikasjon inneholde en identifikator. Anbefalt innhold er basert på standarden CloudEvents (se Utvikling av ytre API i dette dokumentet)</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/Notifikasjonsinnhold%20-%20basiskonsept%20UHF.png" alt="Notifikasjonsinnhold - basiskonsept UHF image">
</div>
<div class="title">Figure 11. Notifikasjonsinnhold - basiskonsept UHF</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph">
<p><a href="Notifikasjonsinnhold%20-%20basiskonsept%20UHF.var.1.html" class="page">Vis detaljer om elementene i diagrammet</a> (Tips: <kbd>Shift</kbd>-klikk for å åpne i nytt vindu)</p>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_inngå_avtaler_om_tilgang_og_levering_av_hendelsesstrømmer_publiser_og_abonner_uhf"><a class="anchor" href="#_inngå_avtaler_om_tilgang_og_levering_av_hendelsesstrømmer_publiser_og_abonner_uhf"></a>3.5. Inngå avtaler om tilgang og levering av hendelsesstrømmer - Publiser og Abonner UHF</h3>
<div class="paragraph">
<p>Datatilbyder mottar forespørsel om å inngå avtale om tilgang og innhenting av hendelsesstrømmer
Hendelsesstrømmen kan være i form av en hendelsesliste eller abonnement på et emne (notifikasjonskø).</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/Inngå%20avtaler%20om%20tilgang%20og%20levering%20av%20hendelsesstrømmer%20-%20Publiser%20og%20Abonner%20UHF%20.png" alt="Inngå avtaler om tilgang og levering av hendelsesstrømmer - Publiser og Abonner UHF  image">
</div>
<div class="title">Figure 12. Inngå avtaler om tilgang og levering av hendelsesstrømmer - Publiser og Abonner UHF</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph">
<p><a href="Inngå%20avtaler%20om%20tilgang%20og%20levering%20av%20hendelsesstrømmer%20-%20Publiser%20og%20Abonner%20UHF%20.var.1.html" class="page">Vis detaljer om elementene i diagrammet</a> (Tips: <kbd>Shift</kbd>-klikk for å åpne i nytt vindu)</p>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_inngå_avtaler_om_tilgang_og_innhenting_av_hendelsesstrømmer_hendelsesliste_og_publiser_og_abonner_uhf"><a class="anchor" href="#_inngå_avtaler_om_tilgang_og_innhenting_av_hendelsesstrømmer_hendelsesliste_og_publiser_og_abonner_uhf"></a>3.6. Inngå avtaler om tilgang og innhenting av hendelsesstrømmer - Hendelsesliste og Publiser og Abonner UHF</h3>
<div class="paragraph">
<p>Datakonsument inngår avtale om tilgang og innhenting av hendelsesstrømmer
Hendelsesstrømmen kan være i form av en hendelsesliste eller abonnement på et emne (notifikasjonskø).</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/Inngå%20avtaler%20om%20tilgang%20og%20innhenting%20av%20hendelsesstrømmer%20-%20Hendelsesliste%20og%20Publiser%20og%20Abonner%20UHF.png" alt="Inngå avtaler om tilgang og innhenting av hendelsesstrømmer - Hendelsesliste og Publiser og Abonner UHF image">
</div>
<div class="title">Figure 13. Inngå avtaler om tilgang og innhenting av hendelsesstrømmer - Hendelsesliste og Publiser og Abonner UHF</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph">
<p><a href="Inngå%20avtaler%20om%20tilgang%20og%20innhenting%20av%20hendelsesstrømmer%20-%20Hendelsesliste%20og%20Publiser%20og%20Abonner%20UHF.var.1.html" class="page">Vis detaljer om elementene i diagrammet</a> (Tips: <kbd>Shift</kbd>-klikk for å åpne i nytt vindu)</p>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_generere_og_publisere_notifikasjoner_publiser_og_abonner_uhf"><a class="anchor" href="#_generere_og_publisere_notifikasjoner_publiser_og_abonner_uhf"></a>3.7. Generere og publisere notifikasjoner - Publiser og Abonner UHF</h3>
<div class="paragraph">
<p>Datatilbyder publiserer en notifikasjon til en Notifikasjonsdistribusjon i form av en publisering/abonneringsløsning. Notifikasjonsdistribusjonen er realisert som en publisert kø per abonnent med et emne.</p>
</div>
<div class="paragraph">
<p>Datatilbyder publiserer notifikasjoner til disse køene når hendelser
oppstår hos datatilbyder.</p>
</div>
<div class="paragraph">
<p>Hver enkelt abonnent har en innboks som abonnenten konsumerer. Notifikasjoner er transient og forsvinner fra innboksen etter at de er konsumert.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/Generere%20og%20publisere%20notifikasjoner%20-%20Publiser%20og%20Abonner%20UHF%20.png" alt="Generere og publisere notifikasjoner - Publiser og Abonner UHF  image">
</div>
<div class="title">Figure 14. Generere og publisere notifikasjoner - Publiser og Abonner UHF</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph">
<p><a href="Generere%20og%20publisere%20notifikasjoner%20-%20Publiser%20og%20Abonner%20UHF%20.var.1.html" class="page">Vis detaljer om elementene i diagrammet</a> (Tips: <kbd>Shift</kbd>-klikk for å åpne i nytt vindu)</p>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_konsumer_notifikasjoner_publiser_og_abonner_uhf"><a class="anchor" href="#_konsumer_notifikasjoner_publiser_og_abonner_uhf"></a>3.8. Konsumer notifikasjoner - Publiser og Abonner UHF</h3>
<div class="paragraph">
<p>Datakonsument lytter på emner som konsumenten abonnerer på hos
Datatilbyder. Når en ny notifikasjon kommer i notifikasjonskøen trigges
konsumering av notifikasjonen.</p>
</div>
<div class="paragraph">
<p>Datakonsumenten vurderer relevans med basis i regler definert for
abonnenten og foretar videre behandling av notifikasjon.</p>
</div>
<div class="paragraph">
<p>Videre behandling består av å gjøre et eOppslag (via API) som beskrevet
i «Løsningsmønster forespørsel UHF» dersom konsumenten har behov for
ytterligere informasjon om hendelsen beskrevet i notifikasjonen.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/Konsumer%20notifikasjoner%20-%20Publiser%20og%20Abonner%20UHF.png" alt="Konsumer notifikasjoner - Publiser og Abonner UHF image">
</div>
<div class="title">Figure 15. Konsumer notifikasjoner - Publiser og Abonner UHF</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph">
<p><a href="Konsumer%20notifikasjoner%20-%20Publiser%20og%20Abonner%20UHF.var.1.html" class="page">Vis detaljer om elementene i diagrammet</a> (Tips: <kbd>Shift</kbd>-klikk for å åpne i nytt vindu)</p>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_oppdatering"><a class="anchor" href="#_oppdatering"></a>4. Oppdatering</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Datatilbyder kan gjøre oppdatering av data tilgjengelig for
datakonsument gjennom et API. Prosessen for en datakonsument å be om
tilgang til oppdatering (se <em>Få tilgang til data</em>) og for en
datatilbyder å gi tilgang til oppdatering (se <em>Tilgjengeliggjøre data
etter forespørsel</em>) er tilsvarende som for tilgang til å lese data. Det
vil ofte være forskjellige kriterier som må oppfylles for å få lov til å
oppdatere data enn for å lese data. Dette kan inkludere både
kvalitetssikring og juridiske hensyn.</p>
</div>
<div class="sect2">
<h3 id="_be_om_oppdatering_løsningsmønster_i_uhf_sektoren"><a class="anchor" href="#_be_om_oppdatering_løsningsmønster_i_uhf_sektoren"></a>4.1. Be om oppdatering  - løsningsmønster i UHF sektoren</h3>
<div class="paragraph">
<p>En prosessflyt en konsument utfører når det utføres et tjenestekall for å be om en oppdatering av data gjennom et API. API-adressen hentes i API-katalogen. Tilgang til APIet byttes inn mot et kjøretids-token i autoriseringstjenesten. Tjenestekall til APIet utføres gjennom API gateway der tokenet benyttes for å få tilgang.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/Be%20om%20oppdatering%20%20-%20løsningsmønster%20i%20UHF%20sektoren%20.png" alt="Be om oppdatering  - løsningsmønster i UHF sektoren  image">
</div>
<div class="title">Figure 16. Be om oppdatering  - løsningsmønster i UHF sektoren</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph">
<p><a href="Be%20om%20oppdatering%20%20-%20løsningsmønster%20i%20UHF%20sektoren%20.var.1.html" class="page">Vis detaljer om elementene i diagrammet</a> (Tips: <kbd>Shift</kbd>-klikk for å åpne i nytt vindu)</p>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_håndtere_forespørsel_om_oppdatering_løsningsmønster_uhf"><a class="anchor" href="#_håndtere_forespørsel_om_oppdatering_løsningsmønster_uhf"></a>4.2. Håndtere forespørsel om oppdatering  - løsningsmønster UHF</h3>
<div class="paragraph">
<p>En prosessflyt en tilbyder av data utfører for å svare på en
oppdateringsforespørsel. Tilbyder mottar forespørsel om oppdatering med
et aksesstoken. Klienten som forespør autentiseres og token valideres.
Eventuelt mer fin-granulert tilgangskontroll utføres og data oppdateres.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/Håndtere%20forespørsel%20om%20oppdatering%20%20-%20løsningsmønster%20UHF%20.png" alt="Håndtere forespørsel om oppdatering  - løsningsmønster UHF  image">
</div>
<div class="title">Figure 17. Håndtere forespørsel om oppdatering  - løsningsmønster UHF</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph">
<p><a href="Håndtere%20forespørsel%20om%20oppdatering%20%20-%20løsningsmønster%20UHF%20.var.1.html" class="page">Vis detaljer om elementene i diagrammet</a> (Tips: <kbd>Shift</kbd>-klikk for å åpne i nytt vindu)</p>
</div>
</div>
</div>
</div>
</div>
</div>
</article>
  </div>
</main>
</div>
<footer class="footer">
  <p>This page was built using the Antora default UI.</p>
  <p>The source code for this UI is licensed under the terms of the MPL-2.0 license.</p>
</footer>
<script src="../../../_/js/site.js"></script>
<script async src="../../../_/js/vendor/highlight.js"></script>
  </body>
</html>
